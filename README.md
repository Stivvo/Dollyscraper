# Dollyscraper

Download lessons recorded with BigBlueButton or Collaborate from dolly using web
scraping.

## Dependencies

``python`` and ``selenium``:

```bash
pip3 install selenium
```

``wget``, Firefox and [geckodriver](https://github.com/mozilla/geckodriver/releases)

``ffmpeg`` (optional, see below)

## Usage

```bash
./dollyscraper.py <user> <password> <url1> </path/to/outputdir1> (bigb|collab) <url2> </path/to/outputdir2> (bigb|collab) ...
```

The first two parameters must be your Dolly credentials. ``<urlN>`` is the page
of the class with the links to the recordings, which are downloaded using wget
to ``<outputdirN>``. ``bigb`` and ``collaborate`` are the available platforms
where videos can be downloaded from. ``dollyscraper.py`` can scrape multiple URL
on the same run to reduce login requests.

Wget is always called with the ``-c`` (``--continue``) option to prevent
re-downloading. After firefox closes, all the videos will continue to be
downloaded in parallell in the background. This is why progress can only be
checked from the log files:

```bash
tail -n 2 *.mp4.log
```

File names can be specified instead of directories:

```bash
./dollyscraper.py <user> <password> <url1> </path/to/outputfile1/file1> (bigb|collab) <url2> </path/to/outputfile2/file2> (bigb|collab) ...
cd </path/to/outputfile1> && sh </path/to/outputfile1>
cd </path/to/outputfile2> && sh </path/to/outputfile2> ...
```

``<fileN>`` are POSIX shell scripts generated by ``dollyscraper.py`` which
will have to be executed manually to actually downlad the videos.

## Platforms

``dollyscraper.py`` generates ``lasturl.txt``, which contains the URL of the
last available lesson. It will prevent useless requests to Collaborate in the
future. This is not necessary on bigb.

Some bigb lessons are actually made of two videos with the same duration: the
webcam (with the audio) and the deskshare (mute), which will both be downloaded.
If ffmpeg is installed, the script will join them.
