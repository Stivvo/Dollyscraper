# Dollyscraper

Download lessons recorded with BigBlueButton or Collaborate from dolly using web
scraping.

## Dependencies

``python`` and ``selenium``:

```bash
pip3 install selenium
```

``wget``, Firefox and [geckodriver](https://github.com/mozilla/geckodriver/releases)

``ffmpeg`` (optional, see below)

## Usage

```bash
python dollyscraper.py <user> <password> <url1> </path/to/outputfile1> (bigb|collab) <url2> </path/to/outputfile2> (bigb|collab) ...
sh </path/to/outputfile1>
sh </path/to/outputfile2> ...
```

The first two parameters must be your Dolly credentials. ``<url>`` is the page
of the class with the links to the recordings, ``bigb`` and ``collaborate`` are
the available platforms where videos can be downloaded from. ``dollyscraper.py``
can scrape multiple URL on the same run to reduce login requests.

``<outputfile>`` are POSIX shell scripts generated by ``dollyscraper.py`` which
actually download the videos using wget. Wget is always called with the ``-c``
(``--continue``) option to prevent re-downloading.

Decoupling the scraping process from the download allows to download videos
without a browser, change the script afterwards and facilitates testing. Lessons
will be downloaded in parallel to maximize speed, this is why the progress can
only be checked from the log files:

```bash
tail -n 2 *.mp4.log
```

``dollyscraper.py`` generates ``lasturl.txt``, which contains the URL of the
last available lesson. It will prevent useless requests to Collaborate in the
future. This is not necessary on bigb.

Some bigb lessons are actually made of two videos with the same duration: the
webcam (with the audio) and the deskshare (mute), which will both be downloaded.
If ffmpeg is installed, the script will join them.
